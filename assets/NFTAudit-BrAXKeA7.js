import{b as H,u as O,r as a,j as t,H as L,B as v,T as u,c as R,O as $,P as U,W as G,X as K}from"./index-B-XNprw7.js";import{h as M,E as q}from"./jspdf.es.min-BMbYpkdr.js";import{F as z,T as w}from"./TextField-7BRf_oMD.js";import{A as X,a as A}from"./Autocomplete-C4HjLB2h.js";import{T as J,a as Q,b as Y,c as E,d as m,e as Z}from"./TableRow-IpU3PYMa.js";import"./isMuiElement-C2262F52.js";const V=async(e,s,p)=>{const d=`https://api.gopluslabs.io/api/v1/nft_security/${s}`,x=new URLSearchParams({contract_addresses:e,nft_id:p});try{const h=await(await fetch(`${d}?${x}`)).json();return h.message==="ok"?h.result:null}catch(o){return console.error("Error fetching NFT security data:",o),null}},D=async()=>{try{const s=await(await fetch("https://api.gopluslabs.io/api/v1/supported_chains")).json();return s.message==="OK"?s.result:[]}catch{return alert("Error fetching chains. Please try later"),[]}},tt=e=>{let s=100;return e.privileged_minting.value!==-1&&(s-=20),e.privileged_burn.value!==0&&(s-=10),e.self_destruct.value!==0&&(s-=15),e.restricted_approval===0&&(s-=10),e.transfer_without_approval.value>0&&(s-=15),e.nft_verified!==1&&(s-=20),e.malicious_nft_contract===1&&(s-=30),e.total_volume<1e4&&(s-=5),e.nft_owner_number<1e3&&(s-=5),e.traded_volume_24h<10&&(s-=5),e.sales_24h===0&&(s-=5),e.nft_open_source!==1&&(s-=10),Math.max(0,Math.min(100,s))},ct=()=>{const{t:e}=H();O();const[s,p]=a.useState([]),[d,x]=a.useState(""),[o,h]=a.useState(""),[y,F]=a.useState(""),[c,N]=a.useState(null),[b,C]=a.useState(!1),[T,k]=a.useState(null),[g,B]=a.useState(""),j=a.useRef(null),I=async()=>{if(j.current){const i=await M(j.current,{scale:2,useCORS:!0});i.toDataURL("image/png");const n=new q("p","mm","a4"),r=190,l=280,W=i.height*r/i.width;let _=0;for(;_<W;){const f=document.createElement("canvas");f.width=i.width,f.height=l*i.width/r,f.getContext("2d").drawImage(i,0,_*i.width/r,i.width,l*i.width/r,0,0,i.width,l*i.width/r);const S=f.toDataURL("image/png");_===0||n.addPage(),n.addImage(S,"PNG",10,10,r,l),_+=l}n.save(`${c.nft_name}_record.pdf`)}};a.useEffect(()=>{(async()=>{const n=await D();n&&p(n)})()},[]),a.useEffect(()=>{c&&B(tt(c))},[c]);const P=async()=>{if(!d||!o){k(e("nft_audit_error_missing"));return}k(null),C(!0);const i=await V(o,d,y);N(i),C(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs(L,{children:[t.jsx("title",{children:e("nft_audit_meta_title")}),t.jsx("meta",{name:"description",content:e("nft_audit_meta_description")}),t.jsx("meta",{name:"keywords",content:"NFT Audit, NFT Security, Smart Contract Analysis, Risk Score, Blockchain, Web3, NFT Risk Assessment"}),t.jsx("meta",{property:"og:title",content:e("nft_audit_meta_title")}),t.jsx("meta",{property:"og:description",content:e("nft_audit_meta_description")}),t.jsx("meta",{property:"og:image",content:"https://rakshit-singh2.github.io/rakshit-singh2/nft-audit-preview.png"}),t.jsx("meta",{property:"og:url",content:"https://rakshit-singh2.github.io/rakshit-singh2nft-audit"}),t.jsx("meta",{property:"og:type",content:"website"}),t.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),t.jsx("meta",{name:"twitter:title",content:e("nft_audit_meta_title")}),t.jsx("meta",{name:"twitter:description",content:e("nft_audit_meta_description")}),t.jsx("meta",{name:"twitter:image",content:"https://rakshit-singh2.github.io/rakshit-singh2/nft-audit-preview.png"}),t.jsx("link",{rel:"icon",type:"image/png",href:"/favicon.ico"})]}),t.jsxs(v,{p:3,maxWidth:"90vw",mx:"auto",minHeight:"80vh",sx:{mt:10},children:[t.jsx(u,{variant:"h4",align:"center",gutterBottom:!0,children:e("nft_audit_title")}),t.jsxs(v,{textAlign:"left",mb:4,children:[t.jsx(u,{variant:"h5",gutterBottom:!0,children:e("nft_audit_subtitle")}),t.jsx(u,{children:e("nft_audit_description")}),t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:e("nft_audit_subtitle")}),t.jsxs("ul",{children:[t.jsx("li",{children:e("nft_audit_why_security")}),t.jsx("li",{children:e("nft_audit_why_score")}),t.jsx("li",{children:e("nft_audit_why_multichain")}),t.jsx("li",{children:e("nft_audit_why_download")})]}),t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:e("nft_audit_features_title")}),t.jsxs("ul",{children:[t.jsx("li",{children:e("nft_audit_feature_verification")}),t.jsx("li",{children:e("nft_audit_feature_privileges")}),t.jsx("li",{children:e("nft_audit_feature_selfdestruct")}),t.jsx("li",{children:e("nft_audit_feature_open_source")}),t.jsx("li",{children:e("nft_audit_feature_metrics")}),t.jsx("li",{children:e("nft_audit_feature_malicious")})]})]}),t.jsxs(v,{display:"flex",flexDirection:"column",gap:2,children:[t.jsx(z,{fullWidth:!0,children:t.jsx(X,{options:s,getOptionLabel:i=>i.name,value:s.find(i=>i.id===d)||null,onChange:(i,n)=>x((n==null?void 0:n.id)||""),renderInput:i=>t.jsx(w,{...i,label:e("nft_audit_select_chain"),variant:"outlined"}),isOptionEqualToValue:(i,n)=>i.id===n.id})}),t.jsx(w,{label:e("nft_audit_nft_address"),fullWidth:!0,value:o,onChange:i=>h(i.target.value)}),t.jsx(w,{label:e("nft_audit_nft_id"),fullWidth:!0,type:"number",value:y,onChange:i=>F(i.target.value)}),t.jsx(R,{variant:"contained",onClick:P,disabled:b,children:b?t.jsx($,{size:24}):e("nft_audit_check_button")})]}),T&&t.jsx(A,{severity:"error",sx:{mt:2},children:T}),c&&t.jsxs(t.Fragment,{children:[t.jsxs(A,{severity:g>90?"success":g>=51?"warning":"error",sx:{mt:2},children:[e("nft_audit_audit_score"),": ",g,"%"]}),t.jsx(R,{variant:"outlined",onClick:I,sx:{mt:2},children:e("nft_audit_download_report")}),t.jsx(J,{ref:j,component:U,sx:{mt:3},children:t.jsxs(Q,{children:[t.jsx(Y,{children:t.jsxs(E,{children:[t.jsx(m,{children:e("nft_audit_table_property")}),t.jsx(m,{children:e("nft_audit_table_value")})]})}),t.jsx(Z,{children:Object.entries(c).filter(([i,n])=>n!==""&&n!=null).map(([i,n])=>t.jsxs(E,{children:[t.jsx(m,{children:G(i)}),t.jsx(m,{children:K(n)})]},i))})]})})]})]})]})};export{ct as default};
