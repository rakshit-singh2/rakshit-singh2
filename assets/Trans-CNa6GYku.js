import{t as Z,w as z,v as q,x as G,r as b,y as w,z as F,A as I,I as Q}from"./index-DC3XBxMK.js";var B,M;function K(){return M||(M=1,B={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),B}var ee=K();const te=Z(ee);var ne=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function R(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(te[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(ne),a=null;(a=i.exec(e))!==null;)if(a[0].trim())if(a[1]){var p=a[1].trim(),f=[p,""];p.indexOf("=")>-1&&(f=p.split("=")),t.attrs[f[0]]=f[1],i.lastIndex--}else a[2]&&(t.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return t}var re=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,se=/^\s*$/,ae=Object.create(null);function J(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(J,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var oe={parse:function(e,t){t||(t={}),t.components||(t.components=ae);var n,r=[],i=[],a=-1,p=!1;if(e.indexOf("<")!==0){var f=e.indexOf("<");r.push({type:"text",content:f===-1?e:e.substring(0,f)})}return e.replace(re,function(d,A){if(p){if(d!=="</"+n.name+">")return;p=!1}var g,h=d.charAt(1)!=="/",$=d.startsWith("<!--"),y=A+d.length,l=e.charAt(y);if($){var T=R(d);return a<0?(r.push(T),r):((g=i[a]).children.push(T),r)}if(h&&(a++,(n=R(d)).type==="tag"&&t.components[n.name]&&(n.type="component",p=!0),n.voidElement||p||!l||l==="<"||n.children.push({type:"text",content:e.slice(y,e.indexOf("<",y))}),a===0&&r.push(n),(g=i[a-1])&&g.children.push(n),i[a]=n),(!h||n.voidElement)&&(a>-1&&(n.voidElement||n.name===d.slice(2,-1))&&(a--,n=a===-1?r:i[a]),!p&&l!=="<"&&l)){g=a===-1?r:i[a].children;var o=e.indexOf("<",y),m=e.slice(y,o===-1?void 0:o);se.test(m)&&(m=" "),(o>-1&&a+g.length>=0||m!==" ")&&g.push({type:"text",content:m})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+J("",n)},"")}};const H=(e,t)=>{var r;if(!e)return!1;const n=((r=e.props)==null?void 0:r.children)??e.children;return t?n.length>0:!!n},W=e=>{var n,r;if(!e)return[];const t=((n=e.props)==null?void 0:n.children)??e.children;return(r=e.props)!=null&&r.i18nIsDynamicList?V(t):t},ie=e=>Array.isArray(e)&&e.every(b.isValidElement),V=e=>Array.isArray(e)?e:[e],le=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},X=(e,t,n,r)=>{if(!e)return"";let i="";const a=V(e),p=t!=null&&t.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((f,d)=>{if(w(f)){i+=`${f}`;return}if(b.isValidElement(f)){const{props:A,type:g}=f,h=Object.keys(A).length,$=p.indexOf(g)>-1,y=A.children;if(!y&&$&&!h){i+=`<${g}/>`;return}if(!y&&(!$||h)||A.i18nIsDynamicList){i+=`<${d}></${d}>`;return}if($&&h===1&&w(y)){i+=`<${g}>${y}</${g}>`;return}const l=X(y,t,n,r);i+=`<${d}>${l}</${d}>`;return}if(f===null){F(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(I(f)){const{format:A,...g}=f,h=Object.keys(g);if(h.length===1){const $=A?`${h[0]}, ${A}`:h[0];i+=`{{${$}}}`;return}F(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:f});return}F(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:f})}),i},ce=(e,t,n,r,i,a)=>{if(t==="")return[];const p=r.transKeepBasicHtmlNodesFor||[],f=t&&new RegExp(p.map(o=>`<${o}`).join("|")).test(t);if(!e&&!f&&!a)return[t];const d={},A=o=>{V(o).forEach(c=>{w(c)||(H(c)?A(W(c)):I(c)&&!b.isValidElement(c)&&Object.assign(d,c))})};A(e);const g=oe.parse(`<0>${t}</0>`),h={...d,...i},$=(o,m,c)=>{var u;const x=W(o),k=l(x,m.children,c);return ie(x)&&k.length===0||(u=o.props)!=null&&u.i18nIsDynamicList?x:k},y=(o,m,c,x,k)=>{o.dummy?(o.children=m,c.push(b.cloneElement(o,{key:x},k?void 0:m))):c.push(...b.Children.map([o],u=>{const s={...u.props};return delete s.i18nIsDynamicList,b.createElement(u.type,{...s,key:x,ref:u.props.ref??u.ref},k?null:m)}))},l=(o,m,c)=>{const x=V(o);return V(m).reduce((u,s,C)=>{var L,S;const O=((S=(L=s.children)==null?void 0:L[0])==null?void 0:S.content)&&n.services.interpolator.interpolate(s.children[0].content,h,n.language);if(s.type==="tag"){let N=x[parseInt(s.name,10)];c.length===1&&!N&&(N=c[0][s.name]),N||(N={});const E=Object.keys(s.attrs).length!==0?le({props:s.attrs},N):N,j=b.isValidElement(E),D=j&&H(s,!0)&&!s.voidElement,_=f&&I(E)&&E.dummy&&!j,P=I(e)&&Object.hasOwnProperty.call(e,s.name);if(w(E)){const v=n.services.interpolator.interpolate(E,h,n.language);u.push(v)}else if(H(E)||D){const v=$(E,s,c);y(E,v,u,C)}else if(_){const v=l(x,s.children,c);y(E,v,u,C)}else if(Number.isNaN(parseFloat(s.name)))if(P){const v=$(E,s,c);y(E,v,u,C,s.voidElement)}else if(r.transSupportBasicHtmlNodes&&p.indexOf(s.name)>-1)if(s.voidElement)u.push(b.createElement(s.name,{key:`${s.name}-${C}`}));else{const v=l(x,s.children,c);u.push(b.createElement(s.name,{key:`${s.name}-${C}`},v))}else if(s.voidElement)u.push(`<${s.name} />`);else{const v=l(x,s.children,c);u.push(`<${s.name}>${v}</${s.name}>`)}else if(I(E)&&!j){const v=s.children[0]?O:null;v&&u.push(v)}else y(E,O,u,C,s.children.length!==1||!O)}else if(s.type==="text"){const N=r.transWrapTextNodes,E=a?r.unescape(n.services.interpolator.interpolate(s.content,h,n.language)):n.services.interpolator.interpolate(s.content,h,n.language);N?u.push(b.createElement(N,{key:`${s.name}-${C}`},E)):u.push(E)}return u},[])},T=l([{dummy:!0,children:e||[]}],g,V(e||[]));return W(T[0])},U=(e,t,n)=>{const r=e.key||t,i=b.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function a(){return b.createElement(b.Fragment,null,i)}return b.createElement(a,{key:r})},ue=(e,t)=>e.map((n,r)=>U(n,r,t)),pe=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:U(e[r],r,t)})}),n},fe=(e,t,n,r)=>e?Array.isArray(e)?ue(e,t):I(e)?pe(e,t):(z(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function me({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a={},values:p,defaults:f,components:d,ns:A,i18n:g,t:h,shouldUnescape:$,...y}){var E,j,D,_,P,v;const l=g||q();if(!l)return z(l,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const T=h||l.t.bind(l)||(Y=>Y),o={...G(),...(E=l.options)==null?void 0:E.react};let m=A||T.ns||((j=l.options)==null?void 0:j.defaultNS);m=w(m)?[m]:m||["translation"];const c=X(e,o,l,r),x=f||c||o.transEmptyNodeValue||r,{hashTransKey:k}=o,u=r||(k?k(c||x):c||x);(_=(D=l.options)==null?void 0:D.interpolation)!=null&&_.defaultVariables&&(p=p&&Object.keys(p).length>0?{...p,...l.options.interpolation.defaultVariables}:{...l.options.interpolation.defaultVariables});const s=p||t!==void 0&&!((v=(P=l.options)==null?void 0:P.interpolation)!=null&&v.alwaysFormat)||!e?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},C={...a,context:i||a.context,count:t,...p,...s,defaultValue:x,ns:m},O=u?T(u,C):x,L=fe(d,O,l,r),S=ce(L||e,O,l,o,C,$),N=n??o.defaultTransParent;return N?b.createElement(N,y,S):S}function ye({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a={},values:p,defaults:f,components:d,ns:A,i18n:g,t:h,shouldUnescape:$,...y}){var c;const{i18n:l,defaultNS:T}=b.useContext(Q)||{},o=g||l||q(),m=h||(o==null?void 0:o.t.bind(o));return me({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a,values:p,defaults:f,components:d,ns:A||(m==null?void 0:m.ns)||T||((c=o==null?void 0:o.options)==null?void 0:c.defaultNS),i18n:o,t:h,shouldUnescape:$,...y})}export{ye as T};
