import{b as U,u as H,r as n,j as t,H as L,B as y,T as u,c as A,X as W,P as $,a0 as K,a1 as D}from"./index-kleb4qTx.js";import{h as G,E as M}from"./jspdf.es.min-BC7fgXjX.js";import{F as q,T as v}from"./TextField-CeqtEnmN.js";import{A as z}from"./Autocomplete-CQ75wo9y.js";import{A as R}from"./Alert-DhDbUUiO.js";import{T as J,a as X,b as Q,c as F,d as f,e as Y}from"./TableRow-fQDkGqrp.js";import"./isMuiElement-BG2dRjU4.js";import"./Close-CwCg11Xt.js";const Z=async(e,s,p)=>{const d=`https://api.gopluslabs.io/api/v1/nft_security/${s}`,g=new URLSearchParams({contract_addresses:e,nft_id:p});try{const h=await(await fetch(`${d}?${g}`)).json();return h.message==="ok"?h.result:null}catch(o){return console.error("Error fetching NFT security data:",o),null}},V=async()=>{try{const s=await(await fetch("https://api.gopluslabs.io/api/v1/supported_chains")).json();return s.message==="OK"?s.result:[]}catch{return alert("Error fetching chains. Please try later"),[]}},tt=e=>{let s=100;return e.privileged_minting.value!==-1&&(s-=20),e.privileged_burn.value!==0&&(s-=10),e.self_destruct.value!==0&&(s-=15),e.restricted_approval===0&&(s-=10),e.transfer_without_approval.value>0&&(s-=15),e.nft_verified!==1&&(s-=20),e.malicious_nft_contract===1&&(s-=30),e.total_volume<1e4&&(s-=5),e.nft_owner_number<1e3&&(s-=5),e.traded_volume_24h<10&&(s-=5),e.sales_24h===0&&(s-=5),e.nft_open_source!==1&&(s-=10),Math.max(0,Math.min(100,s))},dt=()=>{const{t:e}=U();H();const[s,p]=n.useState([]),[d,g]=n.useState(""),[o,h]=n.useState(""),[w,I]=n.useState(""),[l,E]=n.useState(null),[b,k]=n.useState(!1),[C,S]=n.useState(null),[x,N]=n.useState(""),j=n.useRef(null),P=async()=>{if(j.current){const i=await G(j.current,{scale:2,useCORS:!0});i.toDataURL("image/png");const a=new M("p","mm","a4"),r=190,c=280,O=i.height*r/i.width;let m=0;for(;m<O;){const _=document.createElement("canvas");_.width=i.width,_.height=c*i.width/r,_.getContext("2d").drawImage(i,0,m*i.width/r,i.width,c*i.width/r,0,0,i.width,c*i.width/r);const T=_.toDataURL("image/png");m===0||a.addPage(),a.addImage(T,"PNG",10,10,r,c),m+=c}a.save(`${l.nft_name}_record.pdf`)}};n.useEffect(()=>{(async()=>{const a=await V();a&&p(a)})()},[]),n.useEffect(()=>{l&&N(tt(l))},[l]);const B=async()=>{if(!d||!o){S(e("nft_audit_error_missing"));return}S(null),k(!0);const i=await Z(o,d,w);E(i),k(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs(L,{children:[t.jsx("title",{children:e("nft_audit_meta_title")}),t.jsx("meta",{name:"description",content:e("nft_audit_meta_description")}),t.jsx("meta",{name:"keywords",content:"NFT Audit, NFT Security, Smart Contract Analysis, Risk Score, Blockchain, Web3, NFT Risk Assessment"}),t.jsx("meta",{property:"og:title",content:e("nft_audit_meta_title")}),t.jsx("meta",{property:"og:description",content:e("nft_audit_meta_description")}),t.jsx("meta",{property:"og:image",content:"https://rakshit-singh2.github.io/rakshit-singh2/nft-audit-preview.png"}),t.jsx("meta",{property:"og:url",content:"https://rakshit-singh2.github.io/rakshit-singh2nft-audit"}),t.jsx("meta",{property:"og:type",content:"website"}),t.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),t.jsx("meta",{name:"twitter:title",content:e("nft_audit_meta_title")}),t.jsx("meta",{name:"twitter:description",content:e("nft_audit_meta_description")}),t.jsx("meta",{name:"twitter:image",content:"https://rakshit-singh2.github.io/rakshit-singh2/nft-audit-preview.png"}),t.jsx("link",{rel:"icon",type:"image/png",href:"/favicon.ico"}),t.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Person",name:"Rakshit Kumar Singh",jobTitle:"Blockchain & Full-Stack Developer",email:"kumarrakshit745@aol.com",address:{"@type":"PostalAddress",addressLocality:"Faridabad",addressCountry:"India"},alumniOf:[{"@type":"CollegeOrUniversity",name:"DSEU Shakarpur-II Campus"},{"@type":"CollegeOrUniversity",name:"Dyal Singh College, University of Delhi"}],url:"https://rakshit-singh2.github.io/rakshit-singh2/",sameAs:["https://github.com/rakshit-singh2","https://www.linkedin.com/in/rakshit-kumar-singh-526a13146/","https://t.me/AgentDave007","mailto:kumarrakshit745@aol.com","https://www.reddit.com/user/AgentDave745/","https://discord.com/users/agentdave_745"]})})]}),t.jsxs(y,{p:3,maxWidth:"90vw",mx:"auto",minHeight:"80vh",sx:{mt:10},children:[t.jsx(u,{variant:"h4",align:"center",gutterBottom:!0,children:e("nft_audit_title")}),t.jsxs(y,{textAlign:"left",mb:4,children:[t.jsx(u,{variant:"h5",gutterBottom:!0,children:e("nft_audit_subtitle")}),t.jsx(u,{children:e("nft_audit_description")}),t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:e("nft_audit_subtitle")}),t.jsxs("ul",{children:[t.jsx("li",{children:e("nft_audit_why_security")}),t.jsx("li",{children:e("nft_audit_why_score")}),t.jsx("li",{children:e("nft_audit_why_multichain")}),t.jsx("li",{children:e("nft_audit_why_download")})]}),t.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:e("nft_audit_features_title")}),t.jsxs("ul",{children:[t.jsx("li",{children:e("nft_audit_feature_verification")}),t.jsx("li",{children:e("nft_audit_feature_privileges")}),t.jsx("li",{children:e("nft_audit_feature_selfdestruct")}),t.jsx("li",{children:e("nft_audit_feature_open_source")}),t.jsx("li",{children:e("nft_audit_feature_metrics")}),t.jsx("li",{children:e("nft_audit_feature_malicious")})]})]}),t.jsxs(y,{display:"flex",flexDirection:"column",gap:2,children:[t.jsx(q,{fullWidth:!0,children:t.jsx(z,{options:s,getOptionLabel:i=>i.name,value:s.find(i=>i.id===d)||null,onChange:(i,a)=>g((a==null?void 0:a.id)||""),renderInput:i=>t.jsx(v,{...i,label:e("nft_audit_select_chain"),variant:"outlined"}),isOptionEqualToValue:(i,a)=>i.id===a.id})}),t.jsx(v,{label:e("nft_audit_nft_address"),fullWidth:!0,value:o,onChange:i=>h(i.target.value)}),t.jsx(v,{label:e("nft_audit_nft_id"),fullWidth:!0,type:"number",value:w,onChange:i=>I(i.target.value)}),t.jsx(A,{variant:"contained",onClick:B,disabled:b,children:b?t.jsx(W,{size:24}):e("nft_audit_check_button")})]}),C&&t.jsx(R,{severity:"error",sx:{mt:2},children:C}),l&&t.jsxs(t.Fragment,{children:[t.jsxs(R,{severity:x>90?"success":x>=51?"warning":"error",sx:{mt:2},children:[e("nft_audit_audit_score"),": ",x,"%"]}),t.jsx(A,{variant:"outlined",onClick:P,sx:{mt:2},children:e("nft_audit_download_report")}),t.jsx(J,{ref:j,component:$,sx:{mt:3},children:t.jsxs(X,{children:[t.jsx(Q,{children:t.jsxs(F,{children:[t.jsx(f,{children:e("nft_audit_table_property")}),t.jsx(f,{children:e("nft_audit_table_value")})]})}),t.jsx(Y,{children:Object.entries(l).filter(([i,a])=>a!==""&&a!=null).map(([i,a])=>t.jsxs(F,{children:[t.jsx(f,{children:K(i)}),t.jsx(f,{children:D(a)})]},i))})]})})]})]})]})};export{dt as default};
