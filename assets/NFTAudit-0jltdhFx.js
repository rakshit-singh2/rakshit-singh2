import{r as i,u as H,j as e,H as W,B as N,T as G,O,K as U,P as $}from"./index-DRRRdkFA.js";import{A as T,T as M,a as z,b as K,c as k,d as f,e as Y,h as q,E as J}from"./jspdf.es.min-DNnHiDeD.js";import{F as Q,I as X,S as Z,T as b}from"./TextField-C7ZL-OlO.js";import{B as A}from"./Button-DTorTMNU.js";import"./isMuiElement-BlNbrW4Y.js";const D=async(s,r,n)=>{const x=`https://api.gopluslabs.io/api/v1/nft_security/${r}`,d=new URLSearchParams({contract_addresses:s,nft_id:n});try{const h=await(await fetch(`${x}?${d}`)).json();return h.message==="ok"?h.result:null}catch(u){return console.error("Error fetching nft security data:",u),null}},V=async()=>{try{const r=await(await fetch("https://api.gopluslabs.io/api/v1/supported_chains")).json();return r.message==="OK"?r.result:[]}catch{return alert("Error fetching chains. Please try later"),[]}},ee=s=>{let r=100;return s.privileged_minting.value!==-1&&(r-=20),s.privileged_burn.value!==0&&(r-=10),s.self_destruct.value!==0&&(r-=15),s.restricted_approval===0&&(r-=10),s.transfer_without_approval.value>0&&(r-=15),s.nft_verified!==1&&(r-=20),s.malicious_nft_contract===1&&(r-=30),s.total_volume<1e4&&(r-=5),s.nft_owner_number<1e3&&(r-=5),s.traded_volume_24h<10&&(r-=5),s.sales_24h===0&&(r-=5),s.nft_open_source!==1&&(r-=10),Math.max(0,Math.min(100,r))},F=s=>isNaN(parseInt(s))?s.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()):parseInt(s)+1,g=s=>typeof s=="object"&&s!==null?e.jsx("ul",{className:"nested-list",children:Object.entries(s).filter(([r,n])=>n!==""&&n!=null).map(([r,n])=>n!==""&&e.jsxs("li",{children:[e.jsxs("strong",{className:"number",children:[F(r),":"]})," ",typeof n=="object"&&n!==null?g(n):n==="0"||n===0?"No":n==="1"||n===1?"Yes":n]},r))}):s,oe=()=>{const[s,r]=i.useState([]),[n,x]=i.useState(""),[d,u]=i.useState(""),[h,R]=i.useState(""),[c,I]=i.useState(null),[w,v]=i.useState(!1),[C,S]=i.useState(null),[j,P]=i.useState("");i.useRef(null);const y=i.useRef(null);H();const E=async()=>{if(y.current){const t=await q(y.current,{scale:2,useCORS:!0});t.toDataURL("image/png");const a=new J("p","mm","a4"),o=190,l=280,L=t.height*o/t.width;let m=0;for(;m<L;){const p=document.createElement("canvas");p.width=t.width,p.height=l*t.width/o,p.getContext("2d").drawImage(t,0,m*t.width/o,t.width,l*t.width/o,0,0,t.width,l*t.width/o);const _=p.toDataURL("image/png");m===0||a.addPage(),a.addImage(_,"PNG",10,10,o,l),m+=l}a.save(`${c.nft_name}_record.pdf`)}};i.useEffect(()=>{(async()=>{const a=await V();a&&r(a)})()},[]),i.useEffect(()=>{c&&P(ee(c))},[c]);const B=async()=>{if(!n||!d){S("Please select a chain and enter a nft address.");return}S(null),v(!0);const t=await D(d,n,h);I(t),v(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{children:[e.jsx("title",{children:"NFT Audit | Check Security & Risk Score"}),e.jsx("meta",{name:"description",content:"Analyze NFT contracts for security risks and calculate their risk score using GoPlus Labs API. Ensure trust in your NFT investments."}),e.jsx("meta",{name:"keywords",content:"NFT Audit, NFT Security, Smart Contract Analysis, Risk Score, Blockchain, Web3, GoPlus Labs, NFT Risk Assessment"}),e.jsx("meta",{property:"og:title",content:"NFT Audit | Check Security & Risk Score"}),e.jsx("meta",{property:"og:description",content:"Evaluate NFT smart contract security and get a risk score based on various risk factors."}),e.jsx("meta",{property:"og:image",content:"https://yourdomain.com/nft-audit-preview.png"}),e.jsx("meta",{property:"og:url",content:"https://yourdomain.com/nft-audit"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:"NFT Audit | Check Security & Risk Score"}),e.jsx("meta",{name:"twitter:description",content:"Get insights into NFT contract security and risk assessment with our NFT Audit tool."}),e.jsx("meta",{name:"twitter:image",content:"https://yourdomain.com/nft-audit-preview.png"}),e.jsx("link",{rel:"icon",type:"image/png",href:"/favicon.ico"})]}),e.jsxs(N,{p:3,maxWidth:800,mx:"auto",textAlign:"center",minHeight:"100vh",children:[e.jsx(G,{variant:"h4",gutterBottom:!0,children:"Audit Score Checker"}),e.jsxs(N,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(Q,{fullWidth:!0,children:[e.jsx(X,{id:"chain-label",children:"Select a Chain"}),e.jsx(Z,{labelId:"chain-label",id:"chain",value:n,label:"Select a Chain",onChange:t=>x(t.target.value),children:s.map(t=>e.jsx(O,{value:t.id,children:t.name},t.id))})]}),e.jsx(b,{label:"Enter Nft Address",fullWidth:!0,value:d,onChange:t=>u(t.target.value)}),e.jsx(b,{label:"Enter Nft Id",type:"number",fullWidth:!0,value:h,onChange:t=>R(t.target.value)}),e.jsx(A,{variant:"contained",color:"primary",onClick:B,disabled:w,children:w?e.jsx(U,{size:24}):"Check Audit Score"})]}),C&&e.jsx(T,{severity:"error",sx:{mt:2},children:C}),c&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{severity:j>90?"success":j>=51?"warning":"error",sx:{mt:2},children:["Audit Score: ",j,"%"]}),e.jsx(A,{variant:"outlined",onClick:E,sx:{mt:2},children:"Download Audit record"}),e.jsx(M,{ref:y,component:$,sx:{mt:3},children:e.jsxs(z,{children:[e.jsx(K,{children:e.jsxs(k,{children:[e.jsx(f,{children:"Property"}),e.jsx(f,{children:"Value"})]})}),e.jsx(Y,{children:Object.entries(c).filter(([t,a])=>a!==""&&a!=null).map(([t,a])=>a!==""&&e.jsxs(k,{children:[e.jsx(f,{children:F(t)}),e.jsx(f,{children:g(a)===0?"No":g(a)===1?"Yes":g(a)})]},t))})]})})]})]})]})};export{oe as default};
